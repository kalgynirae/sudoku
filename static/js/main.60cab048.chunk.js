(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],{32:function(e,n,t){e.exports=t(44)},44:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(26),o=t.n(c),i=t(4),u=t(12),s=t(27),l=t(14),d=(t(37),t(7)),f=t(6),m=t(1),h=t(2),g=t(21);function b(e,n){var t=e%3;return 9*(3*Math.floor(e/3)+Math.floor(n/3))+(3*t+n%3)}function v(e){return m.c(9*e,9*e+9)}function p(e){return m.c(e,81,9)}function E(e){var n=Math.floor(e/9);return m.g(m.c(9*n,9*n+9))}function k(e){var n=e%9;return m.g(m.c(n,81,9))}function w(e){var n=Math.floor(Math.floor(e/9)/3),t=Math.floor(e%9/3);return m.g(m.c(3*n,3*(n+1)).flatMap((function(e){return m.c(9*e+3*t,9*e+3*(t+1))})))}function y(e){return m.g.union([E(e),k(e),w(e)])}var j,x=t(18),O=t.n(x),S=t(28),q=t(23),C=t(20),L=t(10),M=t(11);!function(e){e.Center="center",e.Corner="corner"}(j||(j={}));var R={number:null,corners:m.g(),centers:m.g(),locked:!1},I=m.d(R);var z=function(){function e(n){Object(L.a)(this,e),this.squares=n}return Object(M.a)(e,[{key:"createMemo",value:function(n){return this.squares===n?this:new e(n)}},{key:"applyDiffs",value:function(e){var n=this;return this.createMemo(e.reduce((function(e,t){return t.squares.reduce((function(e,n){return e.update(n,(function(e){return function(e,n){switch(n.fn){case"setNumber":return e.set("number",n.digit);default:throw new Error("Tried call applyDiffs with invalid operation type: ".concat(n.fn))}}(e,t.operation)}))}),n.squares)}),this.squares))}}],[{key:"empty",value:function(){return e.withNumbers(m.e(null,81))}},{key:"withNumbers",value:function(n){return new e(m.f(n).map((function(e){return I({number:e,locked:null!==e})})).toList())}}]),e}(),B=function(){function e(){Object(L.a)(this,e),this.boardStateListeners=[]}return Object(M.a)(e,[{key:"triggerBoardStateUpdate",value:function(e){var n,t=Object(u.a)(this.boardStateListeners);try{for(t.s();!(n=t.n()).done;){(0,n.value)(e)}}catch(r){t.e(r)}finally{t.f()}}},{key:"addBoardStateListener",value:function(e){this.boardStateListeners.push(e)}},{key:"removeBoardStateListener",value:function(e){this.boardStateListeners=this.boardStateListeners.filter((function(n){return n!==e}))}}]),e}(),D=function(e){Object(q.a)(t,e);var n=Object(C.a)(t);function t(e){var r;return Object(L.a)(this,t),(r=n.call(this)).ws=e,r.serverBoardState=null,r.clientBoardState=z.empty(),r.unconfirmedDiffGroups=[],r.lastSentSyncId=0,r.lastReceivedSyncId=0,r.onMessage=function(e){r.onResponseMessage(JSON.parse(e.data))},r}return Object(M.a)(t,[{key:"connect",value:function(){var e=this;return this.ws.onmessage=this.onMessage,new Promise((function(n,t){e.ws.onopen=function(){return n()},e.ws.onerror=function(e){return t(e)}}))}},{key:"close",value:function(){this.ws.close()}},{key:"sendRequestMessage",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"onResponseMessage",value:function(e){switch(e.type){case"init":this.serverBoardState=z.empty();break;case"partialUpdate":if(null==this.serverBoardState)throw new Error("got partialUpdate before init");this.serverBoardState=this.serverBoardState.applyDiffs(e.diffs),e.syncId>this.lastReceivedSyncId&&this.unconfirmedDiffGroups.splice(0,e.syncId-this.lastReceivedSyncId),this.lastReceivedSyncId=e.syncId;var n=this.unconfirmedDiffGroups.reduce((function(e,n){return e.applyDiffs(n)}),this.serverBoardState);n.squares.equals(this.clientBoardState.squares)||(this.clientBoardState=n,this.triggerBoardStateUpdate(n));break;default:throw new Error("Received unsupported response message type from server: ".concat(e))}}},{key:"applyDiffs",value:function(e){var n=this.clientBoardState.applyDiffs(e);this.unconfirmedDiffGroups.push(e),this.sendRequestMessage({type:"applyDiffs",syncId:++this.lastSentSyncId,diffs:e}),n!==this.clientBoardState&&(this.clientBoardState=n,this.triggerBoardStateUpdate(n))}}]),t}(B);window.RemoteGameState=D,window.getTestRemoteGameState=Object(S.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new D(new WebSocket("ws://127.0.0.1:9091/api/v1/realtime/")),e.next=3,n.connect();case 3:return n.addBoardStateListener((function(e){return console.log(e.squares.toJS())})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));var U=m.d({number:null,corners:m.g(),centers:m.g(),locked:!1});function A(e){var n;if(81!==(e=null!==(n=e)&&void 0!==n?n:m.e(null,81)).size)throw new Error("numbers had length ".concat(e.length,"; expected 81"));return e.map((function(e){return U({number:e,corners:m.g(),centers:m.g(),locked:null!==e})})).toList()}function G(e,n,t){return n.reduce((function(e,n){return e.setIn([n,t],m.g())}),e)}function P(e,n,t,r){return n.reduce((function(e,n){return e.updateIn([n,t],(function(e){return e.remove(r)}))}),e)}var N=m.d({boards:m.a.of(A(null)),index:0});function T(e){return e.index>0}function J(e){return e.index<e.boards.size-1}var K="normal",H="corners",Y="centers",F="input",X="undo",W="redo";function Q(e,n){var t=n.mode,r=n.selection,a=n.settings,c=n.action,o=(n.squares,n.digit);n.direction;switch(c){case F:return function(e,n){var t=e.boards.get(e.index),r=n(t);return m.h(r,t)?e:e.merge({boards:e.boards.slice(0,e.index+1).push(r),index:e.index+1})}(e,(function(e){if(t===K&&1===r.squares.size||t===K&&null===o)return function(e,n,t,r){if(n.getIn([t,"locked"]))return n;var a=y(t);return n.withMutations((function(n){n.setIn([t,"number"],r),G(n,m.a.of(t),"corners"),G(n,m.a.of(t),"centers"),e.get("automaticallyRemoveMarks")&&(P(n,a,"corners",r),P(n,a,"centers",r))}))}(a,e,r.squares.first(),o);if(t===K||t===H||t===Y){var n=r.squares.filter((function(n){return null===e.get(n).number})),c=t===K?H:t;return null===o?G(e,n,c):function(e,n,t,r){return n.map((function(n){return e.get(n)})).some((function(e){return e.hasIn([t,r])}))}(e,n,c,o)?P(e,n,c,o):function(e,n,t,r){return n.reduce((function(e,n){return e.updateIn([n,t],(function(e){return e.add(r)}))}),e)}(e,n,c,o)}throw new Error("Invalid mode: ".concat(t))}));case X:return function(e,n){return T(e)?e.update("index",(function(e){return e-1})):e}(e);case W:return function(e){return J(e)?e.update("index",(function(e){return e+1})):e}(e);default:throw new Error("Invalid action: ".concat(c))}}function V(e){var n=m.c(0,9).map((function(e){return v(e)})),t=m.c(0,9).map((function(e){return p(e)})),r=m.c(0,9).map((function(e){return function(e){var n=27*Math.floor(e/3)+3*(e%3);return m.c(n,n+3).concat(m.c(n+9,n+9+3),m.c(n+18,n+18+3))}(e)})),a=n.concat(t,r),c=m.g().asMutable();return a.forEach((function(n){var t=m.b(n.map((function(n){return[n,e.get(n).number]}))).filter((function(e){return null!==e})),r=t.countBy((function(e){return e}));t.forEach((function(e,n){r.get(e)>1&&c.add(n)}))})),c.asImmutable()}function Z(e,n){return null!==n&&(e.number===n||e.corners.includes(n)||e.centers.includes(n))}function $(){var e=Object(i.a)(["\n  font-family: var(--font-sans);\n  font-size: 1em;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return $=function(){return e},e}function _(){var e=Object(i.a)(['\n  font-family: var(--font-sans);\n  font-size: 1em;\n  font-weight: 500;\n  align-content: space-between;\n  display: grid;\n  grid-template-areas: "a b c" "d e f" "g h i";\n  grid-template-rows: 1fr 1fr 1fr;\n  grid-template-columns: 1fr 1fr 1fr;\n  line-height: calc(var(--square-size) / 3);\n']);return _=function(){return e},e}function ee(){var e=Object(i.a)(["\n  animation: fade-in 0.1s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: var(--font-serif);\n  font-size: calc(var(--square-size) * 0.6);\n  font-weight: 500;\n"]);return ee=function(){return e},e}function ne(){var e=Object(i.a)(["\n  color: ",";\n  padding: 0.2em;\n\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n"]);return ne=function(){return e},e}function te(){var e=Object(i.a)(["\n  border: solid 1px ",";\n"]);return te=function(){return e},e}function re(){var e=Object(i.a)(["\n  background-color: ",";\n  position: relative;\n  transition: background-color 0.1s ease-out;\n  text-align: center;\n\n  & > * {\n    box-sizing: border-box;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n\n  &.focused {\n    background-color: ",";\n  }\n  &.highlighted {\n    background-color: ",";\n    transition: none;\n  }\n  &.selected {\n    background-color: ",";\n    transition: none;\n  }\n  &.error {\n    background-color: ",";\n  }\n  &::after {\n    box-shadow: 0 0 8px ",';\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 5;\n    opacity: 0;\n    transition: opacity 0.1s ease-out;\n  }\n  &.error::after {\n    opacity: 1;\n  }\n  &.selected.error {\n    background-color: ',";\n  }\n\n  @keyframes fade-in {\n    0% {\n      opacity: 0;\n      transform: translateY(0.2em);\n    }\n    100% {\n      opacity: 1;\n      transform: none;\n    }\n  }\n\n  .centers,\n  .corners {\n  }\n\n  .centers {\n  }\n\n  .corners {\n  }\n"]);return re=function(){return e},e}function ae(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  column-gap: var(--square-gap);\n  row-gap: var(--square-gap);\n\n  user-select: none;\n"]);return ae=function(){return e},e}function ce(){var e=Object(i.a)(["\n  width: var(--board-size);\n  height: var(--board-size);\n  margin: 0 auto;\n\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  column-gap: var(--box-gap);\n  row-gap: var(--box-gap);\n\n  touch-action: none;\n"]);return ce=function(){return e},e}function oe(){var e=Object(i.a)(["\n  padding-top: 1rem;\n  touch-action: none;\n"]);return oe=function(){return e},e}function ie(){var e=Object(i.a)(["\n  --box-gap: 4px;\n  --square-gap: 2px;\n  --square-size: 4em;\n  --board-size: calc(\n    9 * var(--square-size) + 6 * var(--square-gap) + 2 * var(--box-gap)\n  );\n\n  width: 100%;\n  margin: 0 auto;\n"]);return ie=function(){return e},e}function ue(e){e.children;for(var n=e.handleTouchMove,t=e.boardAreaRef,r=e.board,c=e.errors,o=e.selection,i=e.settings,u=i.get("highlightPeers")?m.g.intersect(o.squares.map(y)):m.g(),s=[],l=0;l<9;l++){for(var d=[],f=0;f<9;f++){var h=b(l,f),g=r.get(h);d.push(a.a.createElement(he,{index:h,isError:c.includes(h),isFocused:Z(g,o.focusDigit),isLocked:g.get("locked"),isPeer:u.includes(h),isSelected:o.squares.includes(h),hasCursor:o.usingCursor&&o.cursor===h,number:g.get("number"),corners:g.get("corners"),centers:g.get("centers"),settings:i}))}s.push(a.a.createElement(fe,null,d))}return a.a.createElement(le,{ref:t},a.a.createElement(de,{onTouchMove:n},s))}var se=h.c.div(ie()),le=h.c.div(oe()),de=h.c.div(ce()),fe=h.c.div(ae()),me={1:"a",2:"ac",3:"acg",4:"acgi",5:"abcgi",6:"abcghi",7:"abcdghi",8:"abcdfghi",9:"abcdefghi"};function he(e){var n=e.centers,t=e.corners,r=e.isError,c=e.isFocused,o=e.isLocked,i=e.isPeer,u=e.isSelected,s=e.hasCursor,l=e.index,d=e.number,f=e.settings,m=null;s&&(m=a.a.createElement(be,null));var h=[];null!==d?h.push(a.a.createElement(Ee,null,d)):(null!==t&&h.push(a.a.createElement(we,{corners:t})),null!==n&&h.push(a.a.createElement(je,{centers:n})));var g=null;o&&f.get("showLocked")&&(g=a.a.createElement(pe,null));var b=[];return u&&b.push("selected"),r&&b.push("error"),c&&b.push("focused"),i&&b.push("highlighted"),a.a.createElement(ge,{className:"".concat(b.join(" ")),"data-index":l},g,m,h)}var ge=h.c.div(re(),(function(e){return e.theme.square}),(function(e){return e.theme.square.brighten(.3)}),(function(e){return e.theme.squareHighlighted}),(function(e){return e.theme.squareSelected}),(function(e){return e.theme.squareError}),(function(e){return e.theme.error}),(function(e){return e.theme.squareSelectedError})),be=h.c.div(te(),(function(e){return e.theme.base.brighten(.2)})),ve=h.c.div(ne(),(function(e){return e.theme.background}));function pe(){return a.a.createElement(ve,null,a.a.createElement(f.a,{icon:d.b}))}function Ee(e){var n=e.children;return a.a.createElement(ke,null,a.a.createElement("span",null,n))}var ke=h.c.div(ee());function we(e){for(var n=e.corners,t=Object(g.a)(n).sort(),r=me[t.length],c=[],o=0;o<t.length;o++)c.push({n:t[o],area:r.charAt(o)});return a.a.createElement(ye,null,c.map((function(e){var n=e.n,t=e.area;return a.a.createElement("span",{style:{gridArea:t}},n)})))}var ye=h.c.div(_());function je(e){var n=e.centers;return a.a.createElement(xe,null,Object(g.a)(n).sort().map((function(e){return a.a.createElement("span",null,e)})))}var xe=h.c.div($()),Oe=m.d({cursor:null,focusDigit:null,squares:m.g(),usingCursor:!1}),Se="clear",qe="addSquare",Ce="removeSquare",Le="addDirection",Me="focus";function Re(e,n){var t,r=n.action,a=n.square,c=n.direction,o=n.digit;switch(r){case Se:return e.set("squares",m.g());case qe:return e.merge({cursor:a,squares:e.squares.add(a),usingCursor:!1});case Ce:return e.merge({cursor:a,squares:e.squares.remove(a)});case Le:var i=null!==(t=function(e,n){switch(n){case"left":return e%9>0?e-1:null;case"down":return Math.floor(e/9)<8?e+9:null;case"up":return Math.floor(e/9)>0?e-9:null;case"right":return e%9<8?e+1:null;default:return console.log("neighbor was called with an invalid direction: ".concat(n)),null}}(e.cursor,c))&&void 0!==t?t:e.cursor;return e.merge({squares:e.squares.add(i),cursor:i,usingCursor:!0});case Me:return e.withMutations((function(e){e.set("focusDigit",o),null!==o&&e.set("squares",m.g())}));default:throw new Error("Invalid action: ".concat(r))}}var Ie,ze=t(9),Be=t(5),De=t.n(Be);function Ue(e){var n={base:e};return n.background=De()("#232729"),n.border=De()("#606060"),n.text=De()("#d1d2d0"),n.error=De.a.lch(20,50,30),n.button=n.base.darken(.8),n.square=De.a.lch(22,3,252),n.squareSelected=De.a.mix(n.square,n.base,.7,"lab"),n.squareHighlighted=De.a.mix(n.square,n.base,.2,"lab"),n.squareError=De.a.mix(n.square,n.error,.5,"lab"),n.squareLocked=n.square.darken(.2),n.squareSelectedError=De.a.mix(n.squareSelected,n.squareError,.5,"lab"),n}var Ae=function(){var e={red:Ue(De.a.lch(45,35,0)),orange:Ue(De.a.lch(45,35,45)),yellow:Ue(De.a.lch(45,35,90)),green:Ue(De.a.lch(45,35,135)),cyan:Ue(De.a.lch(45,35,180)),blue:Ue(De.a.lch(45,35,225)),indigo:Ue(De.a.lch(45,35,270)),purple:Ue(De.a.lch(45,35,315)),gray:Ue(De.a.lch(45,0,0))};return e.default=e.gray,e}(),Ge=(Ie={},Object(ze.a)(Ie,K,Ae.green),Object(ze.a)(Ie,H,Ae.cyan),Object(ze.a)(Ie,Y,Ae.blue),Ie);function Pe(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: var(--board-size);\n  margin: 0 auto;\n"]);return Pe=function(){return e},e}function Ne(){var e=Object(i.a)(["\n  width: 6em;\n"]);return Ne=function(){return e},e}function Te(){var e=Object(i.a)(["\n  width: 30em;\n"]);return Te=function(){return e},e}function Je(){var e=Object(i.a)(["\n  background: linear-gradient(\n    to bottom,\n    "," 30%,\n    "," 100%\n  );\n  &:hover {\n    background: linear-gradient(\n      to bottom,\n      "," 20%,\n      "," 100%\n    );\n  }\n  &:active,\n  &.active {\n    background: linear-gradient(\n      to bottom,\n      "," 20%,\n      "," 100%\n    );\n    box-shadow: inset 0 0 1px 0 ",";\n  }\n  &:disabled {\n    background: ",";\n    box-shadow: none;\n    color: gray;\n  }\n\n  & > svg {\n    filter: drop-shadow(1px 1px 0 black);\n  }\n"]);return Je=function(){return e},e}function Ke(){var e=Object(i.a)(["\n  color: ",";\n  flex: 0 1 0;\n"]);return Ke=function(){return e},e}function He(){var e=Object(i.a)(["\n  background: ",";\n  border: solid 1px black;\n  border-radius: var(--border-radius);\n  box-shadow: inset 0 1px 0 0 ",";\n  color: inherit;\n  font-size: 1.5em;\n  line-height: 1.8;\n  padding: 0 0.4em;\n  text-shadow: 1px 1px 0px black;\n  touch-action: none;\n"]);return He=function(){return e},e}function Ye(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  & > * {\n    flex: 1 0 0;\n  }\n\n  &.stretch > * {\n    flex: 0 1 100%;\n  }\n\n  &.large {\n    font-size: 2em;\n  }\n\n  & > :not(:last-child) {\n    border-right-width: 0;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n  & > :not(:first-child) {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n"]);return Ye=function(){return e},e}var Fe=h.c.div(Ye());function Xe(e){var n=e.children,t=e.large,r=e.stretch,c=[];return t&&c.push("large"),r&&c.push("stretch"),a.a.createElement(Fe,{className:c.join(" ")},n)}var We=h.c.div(He(),(function(e){return e.theme.button.set("lch.c",0)}),(function(e){return e.theme.button.brighten(.3)})),Qe=Object(h.c)(We)(Ke(),(function(e){return e.theme.background})),Ve=Object(h.c)(We)(Je(),(function(e){return e.theme.button}),(function(e){return e.theme.button.darken(.2)}),(function(e){return e.theme.button.brighten(.2)}),(function(e){return e.theme.button}),(function(e){return e.theme.button.darken(.3)}),(function(e){return e.theme.button.darken(.15)}),(function(e){return e.theme.button.brighten(1.5)}),(function(e){return e.theme.button.desaturate(1)}));function Ze(e){var n=e.children,t=e.className,r=e.active,c=e.enabled,o=e.large,i=e.onClick;return a.a.createElement(Ve,{as:"button",className:"button".concat(r?" active":"").concat(o?" large":"").concat(t?" ".concat(t):""),disabled:!1===c,onClick:i},n)}var $e=h.c.div(Te());function _e(e){var n=e.selection,t=e.dispatchSelection,r=m.c(1,10).map((function(e){return a.a.createElement(Ze,{active:n.focusDigit===e,onClick:function(){return t({action:Me,digit:n.focusDigit===e?null:e})}},e)}));return a.a.createElement($e,null,a.a.createElement(Xe,null,a.a.createElement(Qe,null,a.a.createElement(f.a,{icon:d.d,size:"sm"})),r))}var en=h.c.div(Ne());function nn(e){var n=e.dispatchGamestate,t=e.canUndo,r=e.canRedo;return a.a.createElement(en,null,a.a.createElement(Xe,null,a.a.createElement(Ze,{onClick:function(){return n({action:X})},enabled:t},a.a.createElement(f.a,{icon:d.e,size:"sm"})),a.a.createElement(Ze,{onClick:function(){return n({action:W})},enabled:r},a.a.createElement(f.a,{icon:d.c,size:"sm"}))))}var tn=h.c.div(Pe());function rn(e){var n=e.canRedo,t=e.canUndo,r=e.dispatchGamestate,c=e.selection,o=e.dispatchSelection;return a.a.createElement(tn,null,a.a.createElement(h.a,{theme:Ae.gray},a.a.createElement(_e,{selection:c,dispatchSelection:o})),a.a.createElement(h.a,{theme:Ae.red},a.a.createElement(nn,{dispatchGamestate:r,canUndo:t,canRedo:n})))}function an(e){return e.map((function(e){var n;return null!==(n=e.get("number"))&&void 0!==n?n:"."})).join("")}function cn(){var e=Object(i.a)(["\n  & > label {\n    padding-left: 0.5em;\n  }\n"]);return cn=function(){return e},e}function on(){var e=Object(i.a)(["\n  line-height: 1.5;\n  list-style: none;\n  padding: 0;\n"]);return on=function(){return e},e}function un(){var e=Object(i.a)(["\n  border: 1px solid ",";\n  padding: 0 0.75rem;\n"]);return un=function(){return e},e}function sn(){var e=Object(i.a)(["\n  display: flex;\n"]);return sn=function(){return e},e}var ln=m.b({automaticallyRemoveMarks:!1,highlightAffectedMarks:!0,highlightPeers:!0,showConflicts:!0,showLocked:!1}),dn="toggle";function fn(e,n){var t=n.action,r=n.name;switch(t){case dn:return e.update(r,(function(e){return!e}));default:throw new Error("Invalid action: ".concat(t))}}function mn(e){var n=e.settings,t=e.dispatchSettings;return a.a.createElement(hn,null,a.a.createElement(gn,null,a.a.createElement("legend",null,"Display"),a.a.createElement(bn,null,a.a.createElement(vn,{name:"showConflicts",settings:n,dispatch:t},"Show conflicts"),a.a.createElement(vn,{name:"showLocked",settings:n,dispatch:t},"Show locked squares"))),a.a.createElement(gn,null,a.a.createElement("legend",null,"Pencil Marks"),a.a.createElement(bn,null,a.a.createElement(vn,{name:"automaticallyRemoveMarks",settings:n,dispatch:t},"Automatically remove marks"),a.a.createElement(vn,{name:"highlightAffectedMarks",settings:n,dispatch:t},"Highlight affected marks (doesn't work yet)"))),a.a.createElement(gn,null,a.a.createElement("legend",null,"Selection"),a.a.createElement(bn,null,a.a.createElement(vn,{name:"highlightPeers",settings:n,dispatch:t},"Highlight peers"))))}var hn=h.c.div(sn()),gn=h.c.fieldset(un(),(function(e){return e.theme.border})),bn=h.c.ul(on());function vn(e){var n=e.children,t=e.name,r=e.settings,c=e.dispatch;return a.a.createElement(pn,null,a.a.createElement("input",{type:"checkbox",id:"setting-".concat(t),checked:r.get(t),onChange:function(){return c({action:dn,name:t})}}),a.a.createElement("label",{for:"setting-".concat(t)},n))}var pn=h.c.li(cn());function En(){var e=Object(i.a)(['\n  :root {\n    --border-radius: 10px;\n    --font-serif: "Literata", serif;\n    --font-sans: "Inter", sans-serif;\n    --font-hint: "Inconsolata", monospace;\n  }\n\n  body {\n    background-color: ',";\n    color: ",";\n    font-family: var(--font-sans);\n    line-height: 1;\n    margin: 0;\n  }\n\n  .title {\n    font-family: var(--font-serif);\n    margin-top: 0.5em;\n    text-align: center;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n    margin-top: 1rem;\n  }\n\n  #root > * {\n    flex-grow: 1;\n    margin: 0 1rem;\n  }\n  #root > * + * {\n    margin-top: 1rem;\n  }\n\n  a {\n    color: inherit;\n  }\n"]);return En=function(){return e},e}var kn,wn=new URLSearchParams(window.location.search),yn=wn.has("board")?(kn=wn.get("board"),A(m.a(kn).map((function(e){var n=parseInt(e);return n>0&&n<10?n:null})))):A(null);function jn(){var e=Object(r.useReducer)(Q,null,(function(){return e=yn,N({boards:m.a.of(e)});var e})),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(K),i=Object(l.a)(o,2),g=i[0],b=i[1],v=Object(r.useReducer)(Re,Oe()),p=Object(l.a)(v,2),E=p[0],k=p[1],w=Object(r.useReducer)(fn,ln),y=Object(l.a)(w,2),j=y[0],x=y[1],O=Object(r.useCallback)((function(e){return c(Object(s.a)({mode:g,selection:E,settings:j},e))}),[g,E,j]),S=t.boards.get(t.index),q=Object(r.useMemo)((function(){return j.get("showConflicts")?V(S):m.g()}),[S,j]),C=Object(r.useCallback)((function(e,n){var t=function(e,n){for(var t=document.elementFromPoint(e,n);null!==t&&!t.hasAttribute("data-index");)t=t.parentElement;return null!=t?parseInt(t.getAttribute("data-index")):null}(e,n);null!==t&&k({action:qe,square:t})}),[]),L=Object(r.useCallback)((function(e){O({action:F,digit:e,mode:g,settings:j})}),[O,g,j]),M=Object(r.useCallback)((function(e){var n,t=Object(u.a)(e.changedTouches);try{for(t.s();!(n=t.n()).done;){var r=n.value;C(r.clientX,r.clientY)}}catch(a){t.e(a)}finally{t.f()}}),[C]),R=Object(r.useCallback)((function(e){M(e)}),[M]),I=Object(r.useCallback)((function(e){e.preventDefault(),1!==e.touches.length||e.ctrlKey||k({action:Se}),M(e)}),[M]),z=Object(r.useCallback)((function(e){e.ctrlKey||e.shiftKey||k({action:Se}),C(e.pageX,e.pageY)}),[C]),B=Object(r.useCallback)((function(e){1===e.buttons&&C(e.pageX,e.pageY)}),[C]),D=Object(r.useCallback)((function(e){e.shiftKey||e.ctrlKey||k({action:Se}),k({action:Le,direction:e.key.substring(5).toLowerCase()})}),[]),U=Object(r.useCallback)((function(e){switch(e.key){case"Escape":k({action:Se});break;case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":D(e);break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":L(parseInt(e.key));break;case"Backspace":L(null);break;case"x":J&&O({action:W});break;case"z":T&&O({action:X});break;default:return void console.log("Unhandled keydown: ".concat(e))}e.preventDefault()}),[O,L,D]);Object(r.useEffect)((function(){return document.addEventListener("keydown",U),function(){document.removeEventListener("keydown",U)}}),[U]);var A=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=A.current;return e.addEventListener("mousedown",z),e.addEventListener("mousemove",B),e.addEventListener("touchmove",R),e.addEventListener("touchstart",I),function(){e.removeEventListener("mousedown",z),e.removeEventListener("mousemove",B),e.removeEventListener("touchmove",R),e.removeEventListener("touchstart",I)}}),[z,B,R,I]),a.a.createElement(h.a,{theme:Ae.default},a.a.createElement(xn,null),a.a.createElement(se,null,a.a.createElement(rn,{canRedo:J(t),canUndo:T(t),dispatchGamestate:O,selection:E,dispatchSelection:k}),a.a.createElement(h.a,{theme:Ge[g]},a.a.createElement(ue,{boardAreaRef:A,handleTouchMove:R,board:S,errors:q,selection:E,settings:j}))),a.a.createElement("div",null,a.a.createElement(Xe,{stretch:!0},a.a.createElement(h.a,{theme:Ge[K]},a.a.createElement(Ze,{active:g===K,onClick:function(){return b(K)},theme:"normal"},"normal")),a.a.createElement(h.a,{theme:Ge[H]},a.a.createElement(Ze,{active:g===H,onClick:function(){return b(H)},theme:"corners"},"corner")),a.a.createElement(h.a,{theme:Ge[Y]},a.a.createElement(Ze,{active:g===Y,onClick:function(){return b(Y)},theme:"centers"},"center"))),a.a.createElement(h.a,{theme:Ge[g]},a.a.createElement(Xe,{large:!0,stretch:!0},a.a.createElement(Ze,{onClick:function(){return L(1)}},"1"),a.a.createElement(Ze,{onClick:function(){return L(2)}},"2"),a.a.createElement(Ze,{onClick:function(){return L(3)}},"3"),a.a.createElement(Ze,{onClick:function(){return L(4)}},"4"),a.a.createElement(Ze,{onClick:function(){return L(5)}},"5"),a.a.createElement(Ze,{onClick:function(){return L(6)}},"6"),a.a.createElement(Ze,{onClick:function(){return L(7)}},"7"),a.a.createElement(Ze,{onClick:function(){return L(8)}},"8"),a.a.createElement(Ze,{onClick:function(){return L(9)}},"9"),a.a.createElement(Ze,{onClick:function(){return L(null)}},a.a.createElement(f.a,{icon:d.a,size:"sm"}))))),a.a.createElement(mn,{settings:j,dispatchSettings:x}),a.a.createElement("p",null,"Current board: ",a.a.createElement("tt",null,an(S))),a.a.createElement(Ze,{onClick:function(){return function(e){var n=an(e),t=new URL(window.location.href),r=t.searchParams;r.set("board",n),t.search=r.toString(),navigator.clipboard.writeText(t.href)}(S)}},"Copy current board URL"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("a",{href:"?"},"Empty puzzle")),a.a.createElement("li",null,a.a.createElement("a",{href:"?board=7.4..6..9.8..1......3.2.45.........2.56...78.1.........25.3.1......4..6.9..5..3.7"},"#1")),a.a.createElement("li",null,a.a.createElement("a",{href:"?board=....2.......738....5.4.6.7.1.......896.....41.8.6.1.2...25.71....9.8.7..3.......6"},"#2"))))}var xn=Object(h.b)(En(),(function(e){return e.theme.background}),(function(e){return e.theme.text}));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(jn,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.60cab048.chunk.js.map